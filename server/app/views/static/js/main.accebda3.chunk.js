(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{112:function(e){e.exports=JSON.parse('[{"locationId":"H1","name":"JTI at Gloucester Road eastbound near the Revenue Tower","latitude":22.279311622,"longitude":114.172101664,"userComments":[]},{"locationId":"H2","name":"JTI at Canal Road Flyover northbound near exit of Aberdeen Tunnel","latitude":22.271587756,"longitude":114.180185283,"userComments":[]},{"locationId":"H3","name":"JTI at Island Eastern Corridor westbound near City Garden","latitude":22.292018819,"longitude":114.193869616,"userComments":[]},{"locationId":"H11","name":"JTI at Island Eastern Corridor westbound near Lei King Wan","latitude":22.285235888,"longitude":114.221346549,"userComments":[]},{"locationId":"K01","name":"JTI at Ferry Street southbound near Charming Garden","latitude":22.315044916,"longitude":114.166786346,"userComments":[]},{"locationId":"K02","name":"JTI at Gascoigne Road eastbound near the Hong Kong Polytechnic University","latitude":22.305896494,"longitude":114.178474746,"userComments":[]},{"locationId":"K03","name":"JTI at Waterloo Road southbound near Kowloon Hospital","latitude":22.324182195,"longitude":114.178378266,"userComments":[]},{"locationId":"K04","name":"JTI at Princess Margaret Road southbound near Oi Man Estate","latitude":22.31331063,"longitude":114.176931903,"userComments":[]},{"locationId":"K05","name":"JTI at Kai Fuk Road northbound near the petrol stations","latitude":22.319902728,"longitude":114.206732056,"userComments":[]},{"locationId":"K06","name":"JTI at Chatham Road North southbound near Fat Kwong Street Playground","latitude":22.309177485,"longitude":114.184084134,"userComments":[]},{"locationId":"SJ1","name":"JTI at Tai Po Road \u2013 Sha Tin near the Racecourse","latitude":22.404797024,"longitude":114.20734796,"userComments":[]},{"locationId":"SJ2","name":"JTI at Tate\u2019s Cairn Highway near Shek Mun","latitude":22.389757785,"longitude":114.210593926,"userComments":[]},{"locationId":"SJ3","name":"JTI at Tolo Highway near Science Park","latitude":22.426975789,"longitude":114.206972621,"userComments":[]},{"locationId":"SJ4","name":"JTI at San Tin Highway near Pok Wai Road","latitude":22.464106829,"longitude":114.053710459,"userComments":[]},{"locationId":"SJ5","name":"JTI at Tuen Mun Road near Tuen Mun Heung Sze Wui Road","latitude":22.401075772,"longitude":113.97722659,"userComments":[]}]')},187:function(e,t,n){},509:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),s=n(62),r=n.n(s),i=n(9),o=n(4),l=n(3),d=n(8),u=n(7),h=n(6),j=n(12),b=(n(186),n(187),n(45)),m=n.n(b),p="http://csci2720-g23.cse.cuhk.edu.hk/api/auth/",O=new(function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"login",value:function(e,t){return m.a.post(p+"signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(e,t){return m.a.post(p+"signup",{username:e,password:t})}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}()),x=n(81),g=n.n(x),v=n(52),f=n.n(v),y=n(82),I=n.n(y),C=n(0),k=function(e){if(!e)return Object(C.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},S=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleLogin=a.handleLogin.bind(Object(d.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(d.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(d.a)(a)),a.state={username:"",password:"",loading:!1,message:""},a}return Object(l.a)(n,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",loading:!0}),this.form.validateAll(),0===this.checkBtn.context._errors.length?O.login(this.state.username,this.state.password).then((function(){t.props.history.push("/profile"),window.location.reload()}),(function(e){var n=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({loading:!1,message:n})})):this.setState({loading:!1})}},{key:"render",value:function(){var e=this;return Object(C.jsx)("div",{className:"col-md-12",children:Object(C.jsxs)("div",{className:"card card-container",children:[Object(C.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(C.jsxs)(g.a,{onSubmit:this.handleLogin,ref:function(t){e.form=t},children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"username",children:"Username"}),Object(C.jsx)(f.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[k]})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"password",children:"Password"}),Object(C.jsx)(f.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[k]})]}),Object(C.jsx)("div",{className:"form-group",children:Object(C.jsxs)("button",{className:"btn btn-primary btn-block",disabled:this.state.loading,children:[this.state.loading&&Object(C.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(C.jsx)("span",{children:"Login"})]})}),this.state.message&&Object(C.jsx)("div",{className:"form-group",children:Object(C.jsx)("div",{className:"alert alert-danger",role:"alert",children:this.state.message})}),Object(C.jsx)(I.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}})]})]})})}}]),n}(a.Component),T=function(e){if(!e)return Object(C.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},N=function(e){if(e.length<3||e.length>20)return Object(C.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},w=function(e){if(e.length<6||e.length>40)return Object(C.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},D=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleRegister=a.handleRegister.bind(Object(d.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(d.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(d.a)(a)),a.state={username:"",password:"",successful:!1,message:""},a}return Object(l.a)(n,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleRegister",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",successful:!1}),this.form.validateAll(),0===this.checkBtn.context._errors.length&&O.register(this.state.username,this.state.password).then((function(e){t.setState({message:e.data.message,successful:!0})}),(function(e){var n=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({successful:!1,message:n})}))}},{key:"render",value:function(){var e=this;return Object(C.jsx)("div",{className:"col-md-12",children:Object(C.jsxs)("div",{className:"card card-container",children:[Object(C.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(C.jsxs)(g.a,{onSubmit:this.handleRegister,ref:function(t){e.form=t},children:[!this.state.successful&&Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"username",children:"Username"}),Object(C.jsx)(f.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[T,N]})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{htmlFor:"password",children:"Password"}),Object(C.jsx)(f.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[T,w]})]}),Object(C.jsx)("div",{className:"form-group",children:Object(C.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),this.state.message&&Object(C.jsx)("div",{className:"form-group",children:Object(C.jsx)("div",{className:this.state.successful?"alert alert-success":"alert alert-danger",role:"alert",children:this.state.message})}),Object(C.jsx)(I.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}})]})]})})}}]),n}(a.Component);function H(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var L="http://csci2720-g23.cse.cuhk.edu.hk/api/test/",M=new(function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"getPublicContent",value:function(){return m.a.get(L+"all")}},{key:"getUserBoard",value:function(){return m.a.get(L+"user",{headers:H()})}},{key:"getAdminBoard",value:function(){return m.a.get(L+"admin",{headers:H()})}}]),e}()),J=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={content:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;M.getPublicContent().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(C.jsx)("div",{className:"container",children:Object(C.jsx)("header",{className:"jumbotron",children:Object(C.jsx)("h4",{children:"Journey time indicators"})})})}}]),n}(a.Component),E=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={currentUser:O.getCurrentUser()},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.currentUser;return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("header",{className:"jumbotron",children:Object(C.jsxs)("h3",{children:[Object(C.jsx)("strong",{children:e.username})," Profile"]})}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Token:"})," ",e.accessToken.substring(0,20)," ..."," ",e.accessToken.substr(e.accessToken.length-20)]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Id:"})," ",e.id]}),Object(C.jsx)("strong",{children:"Authorities:"}),Object(C.jsx)("ul",{children:e.roles&&e.roles.map((function(e,t){return Object(C.jsx)("li",{children:e},t)}))})]})}}]),n}(a.Component),A=n(23),P=n.n(A),_=n(175),q=n.n(_);P.a.accessToken="pk.eyJ1IjoibGV1bmczMDEiLCJhIjoiY2tvNnl2dHppMHJxbDJxcXdteTRvNnU3ZyJ9.HVslWQ3-PqqIw-ReK2hUsQ";var K=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={places:[],sortkey:"locationId",order:"1",searchKey:void 0,searchField:"locationId"},a.handleOrderChange=a.handleOrderChange.bind(Object(d.a)(a)),a.handleFieldChange=a.handleFieldChange.bind(Object(d.a)(a)),a.handleClick=a.handleClick.bind(Object(d.a)(a)),a.handleSearch=a.handleSearch.bind(Object(d.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("http://csci2720-g23.cse.cuhk.edu.hk/getplaces/"+this.state.sortkey+"/"+this.state.order).then((function(e){return e.json()})).then((function(t){e.setState({places:t})}))}},{key:"handleSearchKeyChange",value:function(e){this.setState({searchKey:e.target.value})}},{key:"handleSearchFieldChange",value:function(e){this.setState({searchField:e.target.value})}},{key:"handleSearch",value:function(e){var t=this;console.log(this.state.searchKey),console.log(this.state.searchField),e.preventDefault(),fetch("http://csci2720-g23.cse.cuhk.edu.hk/displaysearchresultintable/"+this.state.searchField+"/"+this.state.searchKey).then((function(e){return e.json()})).then((function(e){t.setState({places:e})}))}},{key:"handleFieldChange",value:function(e){var t=this;this.setState({sortkey:e.target.value}),fetch("http://csci2720-g23.cse.cuhk.edu.hk/getplaces/"+e.target.value+"/"+this.state.order).then((function(e){return e.json()})).then((function(e){t.setState({places:e})}))}},{key:"handleOrderChange",value:function(e){var t=this;this.setState({order:e.target.value}),fetch("http://csci2720-g23.cse.cuhk.edu.hk/getplaces/"+this.state.sortkey+"/"+e.target.value).then((function(e){return e.json()})).then((function(e){t.setState({places:e})}))}},{key:"handleClick",value:function(e,t,n,a){this.props.changePlace(a,t,e,n)}},{key:"render",value:function(){var e=this;return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("form",{children:[Object(C.jsxs)("div",{children:["Select field to Search: \xa0\xa0",Object(C.jsxs)("select",{onChange:function(t){e.handleSearchFieldChange(t)},children:[Object(C.jsx)("option",{value:"locationId",children:"Location ID"}),Object(C.jsx)("option",{value:"name",children:"Name"}),Object(C.jsx)("option",{value:"latitude",children:"Latitude"}),Object(C.jsx)("option",{value:"longitude",children:"Longitude"})]})]}),Object(C.jsx)("input",{type:"search",className:"input-text-box",placeholder:"Enter keyword",onChange:function(t){e.handleSearchKeyChange(t)}}),Object(C.jsx)("button",{type:"button",className:"input-text-button",onClick:function(t){e.handleSearch(t)},children:Object(C.jsx)(q.a,{})})]}),Object(C.jsxs)("label",{className:"d-inline",children:["Sort the places according to:\xa0\xa0",Object(C.jsxs)("select",{value:this.state.sortkey,onChange:this.handleFieldChange,children:[Object(C.jsx)("option",{value:"locationId",children:"Location ID"}),Object(C.jsx)("option",{value:"name",children:"Name"}),Object(C.jsx)("option",{value:"latitude",children:"Latitude"}),Object(C.jsx)("option",{value:"longitude",children:"Longitude"})]})]}),Object(C.jsxs)("label",{className:"d-inline",children:["\xa0\xa0in \xa0\xa0",Object(C.jsxs)("select",{value:this.state.order,onChange:this.handleOrderChange,children:[Object(C.jsx)("option",{value:"1",children:"ascending"}),Object(C.jsx)("option",{value:"-1",children:"descending"})]}),"order"]}),Object(C.jsxs)("table",{children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"sort"}),Object(C.jsx)("th",{children:"locationID"}),Object(C.jsx)("th",{children:"name"}),Object(C.jsx)("th",{children:"latitude"}),Object(C.jsx)("th",{children:"longitude"})]})}),Object(C.jsx)("tbody",{children:this.state.places.map((function(t,n){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:n}),Object(C.jsx)("td",{children:t.locationId}),Object(C.jsx)("td",{children:Object(C.jsx)(i.c,{to:"/singleplaceview",onClick:function(){return e.handleClick(t.longitude,t.latitude,t.name,t.locationId)},children:t.name})}),Object(C.jsx)("td",{children:t.latitude}),Object(C.jsx)("td",{children:t.longitude})]},n)}))})]})]})})}}]),n}(c.a.Component),F=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={content:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;M.getUserBoard().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(C.jsx)("div",{className:"container",children:Object(C.jsx)("header",{className:"jumbotron",children:Object(C.jsx)("h3",{children:this.state.content})})})}}]),n}(a.Component),R=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={content:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;M.getAdminBoard().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("header",{className:"jumbotron",children:[Object(C.jsx)("p",{children:"User CRUD"}),Object(C.jsxs)("ul",{children:[Object(C.jsx)("li",{children:Object(C.jsx)(i.c,{to:"/register",children:"Create User"})}),Object(C.jsx)("li",{children:Object(C.jsx)(i.c,{to:"/admin/user/retrieve",children:"Retrieve username"})}),Object(C.jsx)("li",{children:Object(C.jsx)(i.c,{to:"/admin/user/update",children:"Update user"})}),Object(C.jsx)("li",{children:Object(C.jsx)(i.c,{to:"/admin/user/delete",children:"Delete user"})})]}),Object(C.jsx)("p",{children:"Place CRUD"}),Object(C.jsxs)("ul",{children:[Object(C.jsx)("li",{children:Object(C.jsx)(i.c,{to:"/admin/location/create",children:"Create Place"})}),Object(C.jsx)("li",{children:Object(C.jsx)(i.c,{to:"/admin/location/retrieve",children:"Retrieve place"})}),Object(C.jsx)("li",{children:Object(C.jsx)(i.c,{to:"/admin/location/update",children:"Update place"})}),Object(C.jsx)("li",{children:Object(C.jsx)(i.c,{to:"/admin/location/delete",children:"Delete place"})})]})]}),Object(C.jsx)("button",{onClick:function(){fetch("http://csci2720-g23.cse.cuhk.edu.hk/admin/api/location/refresh",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.text()})).then((function(e){alert(e)}))},children:"Refresh Data"})]})}}]),n}(a.Component),U=function(e,t){fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.text()})).then((function(e){document.querySelector("#result").innerHTML=e}))},W=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("div",{id:"form",class:"event",children:[Object(C.jsx)("label",{for:"locationId",children:"locationId: "}),Object(C.jsx)("input",{name:"locationId",id:"locationId"}),Object(C.jsx)("br",{}),Object(C.jsx)("label",{for:"latitude",children:"latitude: "}),Object(C.jsx)("input",{name:"latitude",id:"latitude"}),Object(C.jsx)("br",{}),Object(C.jsx)("label",{for:"longitude",children:"longitude: "}),Object(C.jsx)("input",{name:"longitude",id:"longitude"}),Object(C.jsx)("br",{}),Object(C.jsx)("label",{for:"name",children:"name: "}),Object(C.jsx)("input",{name:"name",id:"name"}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{onClick:function(){var e=[document.querySelector("#locationId").value,document.querySelector("#latitude").value,document.querySelector("#longitude").value,document.querySelector("#name").value];e.includes("")?document.querySelector("#result").innerHTML="Invalid Input. Try again.":U("http://csci2720-g23.cse.cuhk.edu.hk/admin/api/location/create",{locationId:e[0],latitude:e[1],longitude:e[2],name:e[3]})},children:"Submit"})]}),Object(C.jsx)("div",{id:"result"})]})}}]),n}(a.Component),B=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("div",{id:"form",class:"event",children:[Object(C.jsx)("label",{for:"userId",children:"userId: "}),Object(C.jsx)("input",{name:"userId",id:"userId"}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{onClick:function(){var e=[document.querySelector("#userId").value];e.includes("")?document.querySelector("#result").innerHTML="Invalid Input. Try again.":U("http://csci2720-g23.cse.cuhk.edu.hk/admin/api/user/retrieve",{userId:e[0]})},children:"Submit"})]}),Object(C.jsx)("div",{id:"result"})]})}}]),n}(a.Component),z=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("div",{id:"form",class:"event",children:[Object(C.jsx)("p",{children:"Please don't leave blank in any input fields!!"}),Object(C.jsx)("label",{for:"userId",children:"userId: "}),Object(C.jsx)("input",{name:"userId",id:"userId"}),Object(C.jsx)("br",{}),Object(C.jsx)("label",{for:"username",children:"username: "}),Object(C.jsx)("input",{name:"username",id:"username"}),Object(C.jsx)("br",{}),Object(C.jsx)("label",{for:"password",children:"password: "}),Object(C.jsx)("input",{name:"password",id:"password"}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{onClick:function(){var e=[document.querySelector("#userId").value,document.querySelector("#username").value,document.querySelector("#password").value];""===e[0]?document.querySelector("#result").innerHTML="Invalid Input. Try again.":U("http://csci2720-g23.cse.cuhk.edu.hk/admin/api/user/update",{userId:e[0],username:e[1],password:e[2]})},children:"Submit"})]}),Object(C.jsx)("div",{id:"result"})]})}}]),n}(a.Component),G=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("div",{id:"form",class:"event",children:[Object(C.jsx)("label",{for:"userId",children:"userId: "}),Object(C.jsx)("input",{name:"userId",id:"userId"}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{onClick:function(){var e=[document.querySelector("#userId").value];e.includes("")?document.querySelector("#result").innerHTML="Invalid Input. Try again.":U("http://csci2720-g23.cse.cuhk.edu.hk/admin/api/user/delete",{userId:e[0]})},children:"Submit"})]}),Object(C.jsx)("div",{id:"result"})]})}}]),n}(a.Component),Y=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("div",{id:"form",class:"event",children:[Object(C.jsx)("label",{for:"locationId",children:"locationId: "}),Object(C.jsx)("input",{name:"locationId",id:"locationId"}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{onClick:function(){var e=[document.querySelector("#locationId").value];e.includes("")?document.querySelector("#result").innerHTML="Invalid Input. Try again.":U("http://csci2720-g23.cse.cuhk.edu.hk/admin/api/location/retrieve",{locationId:e[0]})},children:"Submit"})]}),Object(C.jsx)("div",{id:"result"})]})}}]),n}(a.Component),Q=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("div",{id:"form",class:"event",children:[Object(C.jsx)("label",{for:"locationId",children:"locationId: "}),Object(C.jsx)("input",{name:"locationId",id:"locationId"}),Object(C.jsx)("br",{}),Object(C.jsx)("label",{for:"latitude",children:"latitude: "}),Object(C.jsx)("input",{name:"latitude",id:"latitude"}),Object(C.jsx)("br",{}),Object(C.jsx)("label",{for:"longitude",children:"longitude: "}),Object(C.jsx)("input",{name:"longitude",id:"longitude"}),Object(C.jsx)("br",{}),Object(C.jsx)("label",{for:"name",children:"name: "}),Object(C.jsx)("input",{name:"name",id:"name"}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{onClick:function(){var e=[document.querySelector("#locationId").value,document.querySelector("#latitude").value,document.querySelector("#longitude").value,document.querySelector("#name").value];""===e[0]?document.querySelector("#result").innerHTML="Invalid Input. Try again.":U("http://csci2720-g23.cse.cuhk.edu.hk/admin/api/location/update",{locationId:e[0],latitude:e[1],longitude:e[2],name:e[3]})},children:"Submit"})]}),Object(C.jsx)("div",{id:"result"})]})}}]),n}(a.Component),V=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("div",{id:"form",class:"event",children:[Object(C.jsx)("label",{for:"locationId",children:"locationId: "}),Object(C.jsx)("input",{name:"locationId",id:"locationId"}),Object(C.jsx)("br",{}),Object(C.jsx)("button",{onClick:function(){var e=[document.querySelector("#locationId").value];e.includes("")?document.querySelector("#result").innerHTML="Invalid Input. Try again.":U("http://csci2720-g23.cse.cuhk.edu.hk/admin/api/location/delete",{locationId:e[0]})},children:"Submit"})]}),Object(C.jsx)("div",{id:"result"})]})}}]),n}(a.Component),Z=n(15),X=n.n(Z),$=n(41),ee=n(11),te=n(65);te.a.register.apply(te.a,Object(ee.a)(te.b));var ne=function(){var e=["H1","H2","H3","H11","K01","K02","K03","K04","K05","K06","SJ1","SJ2","SJ3","SJ4","SJ5"],t={H11:["CH","EH"],H1:["CH","EH"],H2:["CH","EH","WH"],H3:["CH","WH"],K01:["CH","WH"],K02:["CH","EH"],K03:["CH","EH","WH"],K04:["CH","WH"],K05:["CH","EH"],K06:["CH","WH"],SJ1:["LRT","SMT","TSCA"],SJ2:["LRT","TCT","SJ2","TSCA"],SJ3:["LRT","TCT","TSCA"],SJ4:["TKTL","TKTM"],SJ5:["TWCP","TWTM"]};return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("label",{for:"LOCATION_ID",children:"LOCATION ID: "}),Object(C.jsx)("select",{name:"LOCATION_ID",id:"input_LOCATION_ID",onChange:function(){for(var n="",a=t[e[document.querySelector("#input_LOCATION_ID").selectedIndex]],c=0;c<a.length;c++)n=n+'<option value="'+a[c]+'" >'+a[c]+"</option>";document.querySelector("#input_DESTINATION_ID").innerHTML=n},children:e.map((function(e,t){return Object(C.jsx)("option",{value:e,children:e},t)}))}),Object(C.jsx)("label",{for:"DESTINATION_ID",children:"DESTINATION ID: "}),Object(C.jsx)("select",{name:"DESTINATION_ID",id:"input_DESTINATION_ID",children:t.H11.map((function(e,t){return Object(C.jsx)("option",{value:"value",children:e},t)}))}),Object(C.jsx)("br",{}),Object(C.jsx)("input",{type:"radio",id:"input_type_0",name:"input_type",value:"0"}),"Waiting time in the past 10 hours",Object(C.jsx)("br",{}),Object(C.jsx)("input",{type:"radio",id:"input_type_1",name:"input_type",value:"1"}),"Waiting time in this hour of past 7 days",Object(C.jsx)("br",{}),Object(C.jsx)("button",{type:"button",id:"check",onClick:Object($.a)(X.a.mark((function n(){var a,c,s,r,i;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=-1,document.querySelector("#input_type_0").checked?a=0:document.querySelector("#input_type_1").checked&&(a=1),c=e[document.querySelector("#input_LOCATION_ID").selectedIndex],s=t[e[document.querySelector("#input_LOCATION_ID").selectedIndex]][document.querySelector("#input_DESTINATION_ID").selectedIndex],-1!==a?(r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=""+e.getFullYear();return t||(n+="/"),n+=e.getMonth()+1<10?"0"+(e.getMonth()+1):""+(e.getMonth()+1),t||(n+="/"),n+=""+e.getDate()<10?"0"+e.getDate():""+e.getDate(),n+="-",n+=""+e.getHours()<10?"0"+e.getHours():""+e.getHours(),t||(n+=":"),n+=""+e.getMinutes()<10?"0"+e.getMinutes():""+e.getMinutes()},i=0===a?"Waiting time in the past 10 hours":"Waiting time in this hour of past 7 days",function(){var e=Object($.a)(X.a.mark((function e(t){var n,a,i,o,l,d,u,h,j,b;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.querySelector("#result").innerHTML="Loading",n=[],a=[],i=new Date,o="https://api.data.gov.hk/v1/historical-archive/get-file?url=https%3A%2F%2Fresource.data.one.gov.hk%2Ftd%2Fjourneytime.xml&time=",0!==t){e.next=20;break}l=0;case 7:if(!(l<10)){e.next=18;break}d=X.a.mark((function e(t){var d;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=new Date(i.getTime()-36e5*l-9e5*t),e.next=3,fetch(o+r(d,!0)).then((function(e){return e.text()})).then((function(e){return(new window.DOMParser).parseFromString(e,"text/xml")})).then((function(e){for(var t=e.querySelectorAll("jtis_journey_list LOCATION_ID"),i=0;i<t.length;i++)if(t[i].textContent===c&&t[i].nextElementSibling.textContent===s&&"1"===t[i].nextElementSibling.nextElementSibling.nextElementSibling.textContent){a.unshift(parseInt(t[i].nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling.textContent)),n.unshift(r(d,!1));break}})).catch((function(){}));case 3:case"end":return e.stop()}}),e)})),u=0;case 10:if(!(u<(9===l?5:4))){e.next=15;break}return e.delegateYield(d(u),"t0",12);case 12:u++,e.next=10;break;case 15:l++,e.next=7;break;case 18:e.next=32;break;case 20:h=0;case 21:if(!(h<7)){e.next=32;break}j=X.a.mark((function e(t){var l;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=new Date(i.getTime()-864e5*h-9e5*t),e.next=3,fetch(o+r(l,!0)).then((function(e){return e.text()})).then((function(e){return(new window.DOMParser).parseFromString(e,"text/xml")})).then((function(e){for(var t=e.querySelectorAll("jtis_journey_list LOCATION_ID"),i=0;i<t.length;i++)if(t[i].textContent===c&&t[i].nextElementSibling.textContent===s&&"1"===t[i].nextElementSibling.nextElementSibling.nextElementSibling.textContent){a.unshift(parseInt(t[i].nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling.textContent)),n.unshift(r(l,!1));break}})).catch((function(){}));case 3:h<6&&4===t&&(a.unshift(NaN),n.unshift(""));case 4:case"end":return e.stop()}}),e)})),b=0;case 24:if(!(b<5)){e.next=29;break}return e.delegateYield(j(b),"t1",26);case 26:b++,e.next=24;break;case 29:h++,e.next=21;break;case 32:return e.abrupt("return",[n,a]);case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(a).then((function(e){document.querySelector("#result").innerHTML='<canvas id="myChart" width="400" height="200"></canvas>';var t=document.getElementById("myChart");new te.a(t,{type:"line",data:{labels:e[0],datasets:[{label:i,data:e[1],fill:!1,borderColor:"rgb(75, 192, 192)",tension:0}]},options:{interaction:{intersect:!1},scales:{y:{suggestedMin:5,suggestedMax:30,title:{display:!0,text:"Waiting time (in mins)"}},x:{title:{display:!0,text:"Time"}}}}})}))):document.querySelector("#result").innerHTML="Wrong input";case 5:case"end":return n.stop()}}),n)}))),children:"Check!"}),Object(C.jsx)("div",{id:"result"})]})},ae=n(176);P.a.workerClass=ae.a,P.a.accessToken="pk.eyJ1IjoibGV1bmczMDEiLCJhIjoiY2tvNnl2dHppMHJxbDJxcXdteTRvNnU3ZyJ9.HVslWQ3-PqqIw-ReK2hUsQ";var ce=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={lng:a.props.lng,lat:a.props.lat,zoom:14},a.mapContainer=c.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state,n=t.lng,a=t.lat,c=t.zoom,s=new P.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v11",center:[n,a],zoom:c,attributionControl:!1});s.on("move",(function(){e.setState({lng:s.getCenter().lng.toFixed(4),lat:s.getCenter().lat.toFixed(4),zoom:s.getZoom().toFixed(2)})}));var r=(new P.a.Popup).setHTML("<h6>"+this.props.name+"</h6>");(new P.a.Marker).setLngLat([n,a]).setPopup(r).addTo(s)}},{key:"render",value:function(){var e=this,t=this.state,n=t.lng,a=t.lat,c=t.zoom;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"sidebar",children:["Longitude: ",n," | Latitude: ",a," | Zoom: ",c]}),Object(C.jsx)("div",{children:Object(C.jsx)("div",{ref:function(t){return e.mapContainer=t},className:"map-container",style:{height:"50vh"}})})]})}}]),n}(c.a.Component),se=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={lng:a.props.lng,lat:a.props.lat,name:a.props.name,locationId:a.props.locationId,placeInfo:[]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object($.a)(X.a.mark((function e(){var t,n,a,c,s,r,i,o,l;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){return(r=Object($.a)(X.a.mark((function e(t){var n,a,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n={CH:{id:"CH",name:"Cross Harbour Tunnel",journeyData:0,colorId:0,count:0,captureDate:""},EH:{id:"EH",name:"Eastern Harbour Crossing ",journeyData:0,colorId:0,count:0,captureDate:""},WH:{id:"WH",name:"Western Harbour Crossing",journeyData:0,colorId:0,count:0,captureDate:""},LRT:{id:"LRT",name:"Lion Rock Tunnel",journeyData:0,colorId:0,count:0,captureDate:""},SMT:{id:"SMT",name:"Shing Mun Tunnel",journeyData:0,colorId:0,count:0,captureDate:""},TCT:{id:"TCT",name:"Tate's Cairn Tunnel",journeyData:0,colorId:0,count:0,captureDate:""},TKTL:{id:"TKTL",name:"Ting Kau, via Tai Lam Tunnel",journeyData:0,colorId:0,count:0,captureDate:""},TKTM:{id:"TKTM",name:"Ting Kau, via Tuen Mun Road",journeyData:0,colorId:0,count:0,captureDate:""},TSCA:{id:"TSCA",name:"Tsing Sha Control Area",journeyData:0,colorId:0,count:0,captureDate:""},TWCP:{id:"TWCP",name:"Tsuen Wan via Castle Peak",journeyData:0,colorId:0,count:0,captureDate:""},TWTM:{id:"TWTM",name:"Tsuen Wan via Tuen Mun",journeyData:0,colorId:0,count:0,captureDate:""}},a=0;a<t.length;a++)c=t[a].destinationID,n[c].journeyData+=t[a].journeyData,n[c].count+=1,n[c].captureDate=t[a].captureDate,console.log(t[a].colorID),n[c].colorId=t[a].colorID,console.log(n[c].colorId);return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},s=function(e){return r.apply(this,arguments)},c=function(){return(c=Object($.a)(X.a.mark((function e(t,n,a){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.data.gov.hk/v1/historical-archive/get-file?url=https%3A%2F%2Fresource.data.one.gov.hk%2Ftd%2Fjourneytime.xml&time="+a,e.next=3,fetch("https://resource.data.one.gov.hk/td/journeytime.xml").then((function(e){return e.text()})).then((function(e){for(var a=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("jtis_journey_time"),c=0;c<a.length;c++)a[c].childNodes[1].childNodes[0].data==n&&"1"==a[c].childNodes[7].childNodes[0].data&&t.push({locationID:a[c].childNodes[1].childNodes[0].data,destinationID:a[c].childNodes[3].childNodes[0].data,captureDate:a[c].childNodes[5].childNodes[0].data,journeyType:a[c].childNodes[7].childNodes[0].data,journeyData:Number(a[c].childNodes[9].childNodes[0].data),colorID:a[c].childNodes[11].childNodes[0].data})})).catch((function(e){console.log("there is no data at "+a)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},a=function(e,t,n){return c.apply(this,arguments)},n=function(){return(n=Object($.a)(X.a.mark((function e(t,n){var c,r,i,o,l,d,u,h,j,b;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=(new Date).getTime(),r=c-c%6e4,i=60*t,o={January:"01",February:"02",March:"03",April:"04",May:"05",June:"06",July:"07",August:"08",September:"09",October:"10",November:"11",December:"12"},l=[],d=0;case 6:if(!(d<i)){e.next=15;break}return u=new Date(r-6e4*d).toString().split(" "),h=u[4].split(":"),j=u[3]+o[u[1]]+u[2]+"-"+h[0]+h[1],e.next=12,a(l,n,j);case 12:d+=2,e.next=6;break;case 15:return b=s(l),e.abrupt("return",b);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)},t=function(e,t){return n.apply(this,arguments)},e.next=8,t(.02,this.state.locationId);case 8:for(l in i=e.sent,o=[],i)i[l].count>=1&&o.push(i[l]);this.setState({placeInfo:o});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)("button",{class:"btn btn-primary",type:"button","data-bs-toggle":"collapse","data-bs-target":"#placedetails","aria-expanded":"false","aria-controls":"placedetails",children:this.state.name}),Object(C.jsx)("div",{class:"collapse",id:"placedetails",children:Object(C.jsxs)("ul",{class:"list-group",children:[Object(C.jsxs)("li",{class:"list-group-item",children:["locationID : ",this.state.locationId]}),Object(C.jsxs)("li",{class:"list-group-item",children:["Latitude : ",this.state.lat]}),Object(C.jsxs)("li",{class:"list-group-item",children:["Longitude : ",this.state.lng]}),Object(C.jsx)("li",{class:"list-group-item",children:Object(C.jsxs)("table",{children:[Object(C.jsx)("caption",{style:{captionSide:"top"},children:"Lastest Road Condition"}),Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"destinationID"}),Object(C.jsx)("th",{children:"destination"}),Object(C.jsx)("th",{children:"average waiting time"}),Object(C.jsx)("th",{children:"traffic condition"}),Object(C.jsx)("th",{children:"capture date"})]})}),Object(C.jsxs)("tbody",{children:[0==this.state.placeInfo.length&&Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"loading"}),Object(C.jsx)("th",{children:"loading"}),Object(C.jsx)("th",{children:"loading"}),Object(C.jsx)("th",{children:"loading"}),Object(C.jsx)("th",{children:"loading"})]}),this.state.placeInfo.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.id}),Object(C.jsx)("td",{children:e.name}),Object(C.jsx)("td",{children:e.journeyData}),Object(C.jsx)("td",{children:"1"==e.colorId?Object(C.jsx)("span",{children:"\ud83d\udd34"}):"2"==e.colorId?Object(C.jsx)("span",{children:"\ud83d\udfe1"}):Object(C.jsx)("span",{children:"\ud83d\udfe2"})}),Object(C.jsx)("td",{children:e.captureDate})]},t)}))]})]})})]})})]})}}]),n}(c.a.Component),re=n(177),ie=n.n(re),oe=n(179),le=n.n(oe),de=n(178),ue=n.n(de),he=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={locationId:a.props.locationId,comments:[],newComment:"",currentUser:"guest"},a.handleTextAreaChange=a.handleTextAreaChange.bind(Object(d.a)(a)),a.postCommentToDB=a.postCommentToDB.bind(Object(d.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("http://csci2720-g23.cse.cuhk.edu.hk/getusercomments/"+this.state.locationId).then((function(e){return e.json()})).then((function(t){t.forEach((function(e){var t=e.date.split("T");e.date=t[0]})),e.setState({comments:t})}));var t=O.getCurrentUser();t&&this.setState({currentUser:t.username,showAdminBoard:t.roles.includes("ROLE_ADMIN")})}},{key:"handleTextAreaChange",value:function(e){this.setState({newComment:e.target.value}),console.log(e.target.value)}},{key:"postCommentToDB",value:function(){var e=this,t=new Date,n={body:this.state.newComment,username:this.state.currentUser,date:t};fetch("http://csci2720-g23.cse.cuhk.edu.hk/postusercomments/"+this.state.locationId,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then().catch((function(e){console.log("There is error : "+e)})),setTimeout((function(){fetch("http://csci2720-g23.cse.cuhk.edu.hk/getusercomments/"+e.state.locationId).then((function(e){return e.json()})).then((function(t){t.forEach((function(e){var t=e.date.split("T");e.date=t[0]})),e.setState({comments:t})}))}),500)}},{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{className:"card",children:[Object(C.jsxs)("h5",{className:"card-header comment-header",children:[Object(C.jsx)(ie.a,{}),"\xa0 Recent Comments"]}),Object(C.jsxs)("ul",{className:"list-group list-group-flush",children:[this.state.comments.map((function(e,t){return Object(C.jsxs)("li",{className:"list-group-item",children:[Object(C.jsx)("p",{className:"comment-content",children:e.body}),Object(C.jsxs)("p",{className:"comment-subscript",children:["By \xa0",Object(C.jsx)("span",{className:"comment-username",children:e.username}),"\xa0 on",Object(C.jsxs)("span",{className:"text-muted",children:[" ",e.date]}),"\xa0"]})]},t)})),Object(C.jsxs)("li",{className:"list-group-item",children:[Object(C.jsx)("textarea",{className:"input-text-box",placeholder:"Leave your comment...",id:"newComment",rows:"2",style:{width:"50vw"},onChange:function(t){return e.handleTextAreaChange(t)}}),"\xa0\xa0",Object(C.jsx)("button",{type:"button",className:"input-text-button",onClick:this.postCommentToDB,children:Object(C.jsx)(ue.a,{})})]})]})]}),Object(C.jsxs)(i.c,{to:"/table",children:[Object(C.jsx)(le.a,{})," Table"]})]})}}]),n}(c.a.Component),je=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={placeId:void 0,placeLat:void 0,placeLng:void 0,placeName:void 0},a.changePlace=a.changePlace.bind(Object(d.a)(a)),a}return Object(l.a)(n,[{key:"changePlace",value:function(e,t,n,a){this.setState({placeId:e,placeLat:t,placeLng:n,placeName:a})}},{key:"render",value:function(){return Object(C.jsx)("div",{children:Object(C.jsx)(i.a,{children:Object(C.jsxs)(j.c,{children:[Object(C.jsxs)(j.a,{exact:!0,path:"/singleplaceview",children:[Object(C.jsx)(ce,{lat:this.state.placeLat,lng:this.state.placeLng,name:this.state.placeName}),Object(C.jsx)(se,{lat:this.state.placeLat,lng:this.state.placeLng,name:this.state.placeName,locationId:this.state.placeId}),Object(C.jsx)(he,{locationId:this.state.placeId})]}),Object(C.jsx)(j.a,{path:"/",children:Object(C.jsx)(K,{changePlace:this.changePlace})})]})})})}}]),n}(c.a.Component),be=n(112);n(229);P.a.accessToken="pk.eyJ1IjoiMTE1NTEzODY5NCIsImEiOiJja25zajBvNGIwNmNhMnlzMXd0bjIzdnlnIn0.Ap3eCLrjBNsVTQrGNo3tMg";var me=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={lng:114.1911,lat:22.3513,name:"Hong Kong",zoom:10},a.handleClick=a.handleClick.bind(Object(d.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new P.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v11",center:[this.state.lng,this.state.lat],zoom:this.state.zoom});t.on("load",(function(){console.log(be);var n={type:"geojson",data:{type:"FeatureCollection",features:[]}};be.forEach((function(e){var t={type:"Feature",properties:{description:e,icon:"embassy-15"},geometry:{type:"Point",coordinates:[e.longitude,e.latitude]}};n.data.features.push(t)})),console.log(n),t.addSource("places",n),t.addLayer({id:"places",type:"symbol",source:"places",layout:{"icon-image":"{icon}","icon-size":2,"icon-allow-overlap":!0}}),t.on("click","places",(function(n){var a=n.features[0].geometry.coordinates.slice(),c=JSON.parse(n.features[0].properties.description),s='<div style="font-size: medium; color : black; text-align:center;">\n                                            <h4 class="h4Class">'.concat(c.locationId,'</h4>\n                                            <h4 class="h4Class">').concat(c.name," </h4> \n                                        </div>"),r=document.createElement("div"),i=document.createElement("div");for(i.innerHTML='<button class="btn btn-success btn-simple text-white" > '.concat(c.name," </button>"),r.innerHTML=s,r.appendChild(i),i.addEventListener("click",(function(t){e.handleClick(c.name,c.latitude,c.longitude)}));Math.abs(n.lngLat.lng-a[0])>180;)a[0]+=n.lngLat.lng>a[0]?360:-360;(new P.a.Popup).setLngLat(a).setDOMContent(r).addTo(t)}))}));var n=new P.a.NavigationControl;t.addControl(n,"bottom-right")}},{key:"handleClick",value:function(e,t,n){console.log(e),this.setState({lng:n,lat:t,name:e})}},{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{ref:function(t){return e.mapContainer=t},style:{width:"100%",height:"80vh"}}),Object(C.jsx)("div",{children:Object(C.jsx)(ce,{lng:this.state.lng,lat:this.state.lat,name:this.state.name})},this.state.name)]})}}]),n}(c.a.Component),pe=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).logOut=a.logOut.bind(Object(d.a)(a)),a.state={showAdminBoard:!1,currentUser:void 0},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=O.getCurrentUser();e&&this.setState({currentUser:e,showAdminBoard:e.roles.includes("ROLE_ADMIN")})}},{key:"logOut",value:function(){O.logout()}},{key:"render",value:function(){var e=this.state,t=e.currentUser,n=e.showAdminBoard;return Object(C.jsxs)("div",{children:[Object(C.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(C.jsx)(i.c,{to:"/",className:"navbar-brand",children:"CSCI2720 Group 5"}),Object(C.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(i.c,{to:"/home",className:"nav-link",children:"Home"})}),n&&Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(i.c,{to:"/admin",className:"nav-link",children:"Admin Board"})}),t&&Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(i.c,{to:"/map",className:"nav-link",children:"Map"})}),t&&Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(i.c,{to:"/table",className:"nav-link",children:"Table"})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(i.c,{to:"/chart",className:"nav-link",children:"Chart"})})]}),t?Object(C.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(i.c,{to:"/profile",className:"nav-link",children:t.username})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)("a",{href:"/",className:"nav-link",onClick:this.logOut,children:"LogOut"})})]}):Object(C.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(i.c,{to:"/login",className:"nav-link",children:"Login"})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(i.c,{to:"/register",className:"nav-link",children:"Sign Up"})})]})]}),Object(C.jsx)("div",{className:"container mt-3",children:Object(C.jsxs)(j.c,{children:[Object(C.jsx)(j.a,{exact:!0,path:["/","/home"],component:J}),Object(C.jsx)(j.a,{exact:!0,path:"/login",component:S}),Object(C.jsx)(j.a,{exact:!0,path:"/register",component:D}),Object(C.jsx)(j.a,{exact:!0,path:"/profile",component:E}),Object(C.jsx)(j.a,{path:"/user",component:F}),Object(C.jsx)(j.a,{exact:!0,path:"/admin",component:R}),Object(C.jsx)(j.a,{exact:!0,path:"/admin/user/retrieve",component:B}),Object(C.jsx)(j.a,{exact:!0,path:"/admin/user/update",component:z}),Object(C.jsx)(j.a,{exact:!0,path:"/admin/user/delete",component:G}),Object(C.jsx)(j.a,{exact:!0,path:"/admin/location/create",component:W}),Object(C.jsx)(j.a,{exact:!0,path:"/admin/location/retrieve",component:Y}),Object(C.jsx)(j.a,{exact:!0,path:"/admin/location/update",component:Q}),Object(C.jsx)(j.a,{exact:!0,path:"/admin/location/delete",component:V}),Object(C.jsx)(j.a,{exact:!0,path:"/chart",component:ne}),Object(C.jsx)(j.a,{exact:!0,path:"/table",component:je}),Object(C.jsx)(j.a,{exact:!0,path:"/map",component:me})]})})]})}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(C.jsx)(i.b,{children:Object(C.jsx)(pe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[509,1,2]]]);
//# sourceMappingURL=main.accebda3.chunk.js.map